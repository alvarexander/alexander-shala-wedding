<div class="rsvsp">
    <mat-card appearance="outlined" class="rsvsp__card">
        <mat-card-header>
            <div mat-card-avatar class="rsvsp__avatar">ðŸ’Œ</div>
            <mat-card-title>RSVP</mat-card-title>
            <mat-card-subtitle *ngIf="code()">Code: {{ code() }}</mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
            @if (loading()) {
                <div class="rsvsp__loading">Loading detailsâ€¦</div>
            } @else {
                <div class="rsvsp__error">{{ error() }}</div>
            }

            @if (!loading() && !error() && info()) {
                <div class="rsvsp__details">
                    <div class="rsvsp__detail">
                        <span class="label">Guest name</span>
                        <span class="value">{{ info()?.guest_name || 'â€”' }}</span>
                    </div>
                    <div class="rsvsp__detail">
                        <span class="label">Party size</span>
                        <span class="value">{{ info()?.party_size ?? 'â€”' }}</span>
                    </div>
                    <div class="rsvsp__detail">
                        <span class="label">Current status</span>
                        <span
                            class="value status status--{{ info()?.rsvp_response }}">{{ (info()?.rsvp_response || 'pending') | uppercase }}</span>
                    </div>
                </div>

                <div class="rsvsp__actions">
                    <button mat-raised-button color="primary" class="yes" [disabled]="submitting()==='yes'"
                            (click)="rsvp('yes')">
                        <mat-icon>check_circle</mat-icon>
                        Yes, I will attend
                    </button>
                    <button mat-stroked-button color="warn" class="no" [disabled]="submitting()==='no'"
                            (click)="rsvp('no')">
                        <mat-icon>cancel</mat-icon>
                        No, I can't attend
                    </button>
                </div>
                @if(submitMessage()) {
                    <div class="rsvsp__message">{{ submitMessage() }}</div>
                }
            }
        </mat-card-content>
    </mat-card>
</div>
