<div class="rsvp">
    <mat-card appearance="outlined" class="rsvp__card animate__animated animate__zoomIn">
        <mat-card-header class="d-flex align-items-center">
            <mat-card-title>RSVP</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            @if (loading()) {
                <div class="rsvp__loading">Loading details…</div>
            } @else {
                <div class="rsvp__error">{{ error() }}</div>
            }

            @if (!loading() && !error() && info()) {
                <p>
                    We are so excited to celebrate our special day with you!
                    <br/>
                    <br/>

                    Our wedding will take place on Saturday, September 26th, 2025 at 5:00 PM EST at:
                    <br/>
                    <br/>
                    Chapel & Cellar <br />
                    216 W. Lyman Avenue <br />
                    Winter Park, FL 32789
                    <br/>
                    <br/>

                    Your presence means the world to us, and we can’t wait to share this joyful occasion together.
                    <br/>
                    <br/>
                    <b>
                        Kindly note that due to venue limitations and budgeting, we are only able to accommodate the
                        guests
                        listed on the invitation. We truly appreciate your understanding and can’t wait to celebrate
                        with
                        each of you!
                    </b>
                </p>
                <div class="rsvp__details">
                    <div class="rsvp__detail">
                        <span>Guest(s) name</span>
                        <span class="value">{{ info()?.guest_name || '—' }}</span>
                    </div>
                    <div class="rsvp__detail">
                        <span>Party size</span>
                        <span class="value">{{ info()?.party_size ?? '—' }}</span>
                    </div>
                    <div class="rsvp__detail">
                        <span>Current status</span>
                        <span class="value status status--{{ info()?.rsvp_response }}">{{
                                info()?.rsvp_response || 'pending' | uppercase
                            }}</span>
                    </div>
                </div>

                <div class="rsvp__actions">
                    <button
                        mat-button
                        color="primary"
                        class="yes"
                        [disabled]="submitting() === 'yes'"
                        (click)="rsvp('yes')"
                    >
                        Yes, I will attend
                    </button>
                    <button
                        mat-stroked-button
                        color="warn"
                        class="no"
                        [disabled]="submitting() === 'no'"
                        (click)="rsvp('no')"
                    >
                        No, I can't attend
                    </button>
                </div>
                @if (submitMessage()) {
                    <div class="rsvp__message">{{ submitMessage() }}</div>
                }
            }
        </mat-card-content>
    </mat-card>
</div>
